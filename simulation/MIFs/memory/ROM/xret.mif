00110111 // lui sp,4096  ; main
00000001
00000000
00000001
10110111 // lui x5,1
00010010
00000000
00000000
00110011 // or sp,sp,x5
01100001
01010001
00000000
00010011 // addi sp,sp,-32
00000001
00000001
11111110
00010011 // addi s0,sp,32
00000100
00000001
00000010
10010011 // addi t0,x0,100            ; BASE address for interrupt handling
00000010
01000000
00000110
10010011 // slli t0,t0,2
10010010
00100010
00000000
01110011 // csrrw x0,mtvec,t0
10010000
01010010
00110000
00010011 // addi a0,x0,0b1            ; SSI
00000101
00010000
00000000
10010011 // ori t0,x0,0b1010
01100010
10100000
00000000
01110011 // csrrw x0,mie,t0           ; enables software interrupts
10010000
01000010
00110000
01110011 // csrrw x0,mideleg,t0       ; delegates software interrupts
10010000
00110010
00110000
00010011 // ori t1,x0,0b10101010
01100011
10100000
00001010
01110011 // csrrw x0,mstatus,t0       ; enables global interrupts
10010000
00000010
00110000
10010011 // addi t0,x0,-1
00000010
11110000
11111111
00110111 // lui t1,524292             ; msip base address
01000011
00000000
10000000
00100011 // sw t0,0(t1)
00100000
01010011
00000000
01101111 // jal x0,30
00000000
11100000
00000001
00110111 // lui t1,524296             ; ssip base address
10000011
00000000
10000000
00100011 // sw t0,0(t1)
00100000
01010011
00000000
00010011 // addi sp,sp,28
00000001
11000001
00000001
10010011 // addi x1,x0,1
00000000
00010000
00000000
00100011 // sw x1,0(sp)
00100000
00010001
00000000
00010011 // addi sp,sp,4
00000001
01000001
00000000
00110011 // add x0,x0,x0
00000000
00000000
00000000
11110011 // csrrs t0,mcause,x0        ; does not write to mcause
00100010
00100000
00110100
00110011 // and t1,t0,a0
11110011
10100010
00000000
01100011 // bne t1,x0,4
00010010
00000011
00000000
01110011 // mret
00000000
00100000
00110000
10010011 // ori t0,x0,0b100000000000  ; SSI ISR
01100010
00000000
10000000
00100011 // sb t0,0(s0)
00000000
01010100
00000000
01110011 // sret
00000000
00100000
00010000
10010011 // addi t0,x0,0b1
00000010
00010000
00000000
00010011 // slli t1,t0,12             ; MPP[1]
10010011
11000010
00000000
10010011 // slli t0,t0,11             ; MPP[0]
10010010
10110010
00000000
01110011 // csrrs x0,mstatus,t0       ; set MPP[0]
10100000
00000010
00110000
01110011 // csrrc x0,mstatus,t1       ; clear MPP[1]
00110000
00000011
00110000
01110011 // ecall
00000000
00000000
00000000
01100111 // jalr x0,0(ra)
10000000
00000000
00000000
10010011 // addi t0,x0,0b1
00000010
00010000
00000000
00010011 // slli t1,t0,12             ; MPP[1]
10010011
11000010
00000000
10010011 // slli t0,t0,11             ; MPP[0]
10010010
10110010
00000000
01110011 // csrrc x0,mstatus,t0       ; clear MPP[0]
10110000
00000010
00110000
01110011 // csrrc x0,mstatus,t1       ; clear MPP[1]
00110000
00000011
00110000
01110011 // ecall
00000000
00000000
00000000
01100111 // jalr x0,0(ra)
10000000
00000000
00000000
