00110111 // lui sp,4096  ; main
00000001
00000000
00000001
10110111 // lui x5,1
00010010
00000000
00000000
00110011 // or sp,sp,x5
01100001
01010001
00000000
00010011 // addi sp,sp,-32
00000001
00000001
11111110
00010011 // addi s0,sp,32
00000100
00000001
00000010
10010011 // addi t0,x0,112             ; BASE address for interrupt handling
00000010
00000000
00000111
01110011 // csrrw x0,mtvec,t0
10010000
01010010
00110000
01110011 // csrrw x0,stvec,t0
10010000
01010010
00010000
10110111 // lui t0,-1
11110010
11111111
11111111
00110111 // lui t1,262143             ; mtimecmp base address
11110011
11111111
00111111
00010011 // addi t1, t1, 48
00000011
00000011
00000011
00100011 // sw t0,0(t1)
00100000
01010011
00000000
00010011 // addi a0,x0,0b1            ; SSI
00000101
00010000
00000000
10010011 // ori t0,x0,0b1010
01100010
10100000
00000000
01110011 // csrrw x0,mie,t0           ; enables software interrupts
10010000
01000010
00110000
01110011 // csrrw x0,mideleg,t0       ; delegates software interrupts
10010000
00110010
00110000
00010011 // ori t1,x0,0b10101010
01100011
10100000
00001010
01110011 // csrrw x0,mstatus,t0       ; enables global interrupts
10010000
00000010
00110000
10010011 // addi t0,x0,-1
00000010
11110000
11111111
00110111 // lui s2,262143             ; msip base address
11111001
11111111
00111111
00100011 // sw t0,0(s2)
00100000
01011001
00000000
00010011 // addi s2,x0,0b10
00001001
00100000
00000000
01110011 // csrrs x0,mip,s2
00100000
01001001
00110100
11101111 // jal ra,108
00000000
11000000
00000110
00010011 // addi sp,sp,28
00000001
11000001
00000001
00010011 // addi sp,sp,-8
00000001
10000001
11111111
10010011 // addi x1,x0,1
00000000
00010000
00000000
00100011 // sw t6,0(sp)
00100000
11110001
00000001
00010011 // addi sp,sp,4
00000001
01000001
00000000
00110011 // add x0,x0,x0
00000000
00000000
00000000
10010011 // addi t6,t6,1
10001111
00011111
00000000
11110011 // csrrs t2,sepc,x0          ; does not write to sepc
00100011
00010000
00010100
01110011 // csrrw x0,sepc,t2
10010000
00010011
00010100
11110011 // csrrs t0,scause,x0        ; does not write to scause
00100010
00100000
00010100
01110011 // csrrw x0,scause,x0        ; writes to scause
00010000
00100000
00010100
10010011 // slli t0,t0,1
10010010
00010010
00000000
10010011 // srli t0,t0,1
11010010
00010010
00000000
10110011 // sub t2,t0,a0
10000011
10100010
01000000
01100011 // beq t2,x0,24
10001100
00000011
00000000
11110011 // csrrs t2,mepc,x0          ; does not write to mepc
00100011
00010000
00110100
01110011 // csrrw x0,mepc,t2
10010000
00010011
00110100
10110111 // lui s3,262143             ; msip base address
11111001
11111111
00111111
00100011 // sw x0,0(s3)
10100000
00001001
00000000
01110011 // mret
00000000
00100000
00110000
11110011 // csrrs t2,sepc,x0          ; does not write to sepc
00100011
00010000
00010100
01110011 // csrrw x0,sepc,t2
10010000
00010011
00010100
10010011 // ori t0,x0,0b100000000000  ; SSI ISR
01100010
00000000
10000000
00100011 // sb t0,0(s0)
00000000
01010100
00000000
01110011 // csrrc x0,sip,s3
10110000
01001001
00010100
01110011 // sret
00000000
00100000
00010000
10010011 // addi t0,x0,0b1
00000010
00010000
00000000
00010011 // slli t1,t0,12             ; MPP[1]
10010011
11000010
00000000
10010011 // slli t0,t0,11             ; MPP[0]
10010010
10110010
00000000
01110011 // csrrs x0,mstatus,t0       ; set MPP[0]
10100000
00000010
00110000
01110011 // csrrc x0,mstatus,t1       ; clear MPP[1]
00110000
00000011
00110000
01110011 // csrrw x0,mepc,ra
10010000
00010000
00110100
01110011 // csrrsi x0,mstatus,0b1010
01100000
00000101
00110000
01110011 // mret
00000000
00100000
00110000
00001111 // fence
00000000
11110000
00001111
00001111 // fence
00000000
11110000
00001111
00001111 // fence
00000000
11110000
00001111
